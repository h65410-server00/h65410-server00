import{Q as u}from"./QInput.479a4d0c.js";import{Q as c}from"./QBtn.d13105fa.js";import{Q as v,a as V}from"./QDialog.f8563754.js";import{r as p,c as b,W as g,X as h,Y as i,j as l,a4 as r,ac as y}from"./index.c958989c.js";import{freez as m,api as U}from"./axios.38a03c4c.js";import{u as _}from"./vue-i18n.runtime.bd082555.js";const Q={class:"q-pb-md full-width text-center"},I={class:"q-pb-md full-width text-center"},x={class:"full-width text-center"},D={__name:"ChangePasswordDialog",props:["getStore"],setup(f){const s=f.getStore();_();const e=p(""),d=p(""),n=b({get:()=>s.newPasswordUserId>0,set:a=>s.newPasswordUserId=0});async function w(){m(!0);try{if(e.value.length<4||e.value.length>12||e.value!==d.value)throw new Error("Unvalid data");await U.put(`/users/${s.newPasswordUserId}/password`,{password:e.value}),s.newPasswordUserId=0}catch(a){console.log(a)}finally{m(!1)}}return(a,o)=>(g(),h(V,{modelValue:n.value,"onUpdate:modelValue":o[2]||(o[2]=t=>n.value=t)},{default:i(()=>[l(v,{class:"q-pa-md text-center",style:{width:"250px"}},{default:i(()=>[r("form",{onSubmit:y(w,["prevent"])},[r("div",Q,[l(u,{modelValue:e.value,"onUpdate:modelValue":o[0]||(o[0]=t=>e.value=t),type:"password",autocomplete:"off",label:a.$t("new_password")},null,8,["modelValue","label"])]),r("div",I,[l(u,{modelValue:d.value,"onUpdate:modelValue":o[1]||(o[1]=t=>d.value=t),type:"password",autocomplete:"off",label:a.$t("confirm")},null,8,["modelValue","label"])]),r("div",x,[l(c,{type:"submit",class:"full-width",color:"primary",label:a.$t("save")},null,8,["label"])])],32)]),_:1})]),_:1},8,["modelValue"]))}};export{D as _};
