import{Q as g,a as Q}from"./QBtn.d13105fa.js";import{Q as V}from"./QInput.479a4d0c.js";import{Q as q}from"./QMarkupTable.3a2cc66b.js";import{u as E}from"./app-store.ddb93f8a.js";import{r as N,c as $,ad as D,x as F,W as a,X as K,Y as v,a4 as c,a5 as r,F as y,a6 as f,ae as R,j as m,u as d,Z as S,a0 as b}from"./index.c958989c.js";const z={class:"text-center"},L={key:0,class:"text-right",style:{padding:"0px 5px"}},O={class:"text-left"},U={key:0,class:"text-center",style:{padding:"2px"}},W={__name:"DataGrid",props:["columns","actionLabel","permissionKey","getStore"],setup(i){const l=E(),k=N(""),u=i,s=u.getStore(),C=()=>{const t={};u.columns.forEach(n=>{const e=n.v;t[n.n]=typeof e=="undefined"?"":e}),s.newRow=t},h={};u.columns.forEach(t=>{const n=t.n;h[n]=""}),s.keyword=h;const B=$(()=>{const t=s.keyword;return s.data.filter(n=>{for(const e of Object.keys(t))if(!n[e].toString().startsWith(t[e]))return!1;return!0})}),x=t=>{const n=s.sortkey[0]=="-"?"":"-";s.sortkey=n+t;const e=s.sortkey,o=e[0]=="-",p=o?e.substring(1):e;s.data.sort((w,_)=>o===!0?w[p]>_[p]?-1:1:w[p]>_[p]?1:-1)};return D(()=>{l.canCreate(u.permissionKey)&&l.menue.push({i:0,label:u.actionLabel,action:C})}),F(()=>{l.menue.forEach((t,n)=>{t.i===0&&l.menue.splice(n,1)})}),(t,n)=>(a(),K(q,{class:"my-sticky-header-table",separator:"cell",flat:"",bordered:"",square:"",dense:""},{default:v(()=>[c("thead",null,[c("tr",null,[c("th",z,[c("span",{class:"cursor-pointer text-h6 text-primary",onClick:n[0]||(n[0]=e=>x("id"))},"#")]),(a(!0),r(y,null,f(i.columns,e=>(a(),r("th",{key:e,class:"text-left",style:R("width:"+e.w+"px;padding:0")},[m(V,{modelValue:d(s).keyword[e.n],"onUpdate:modelValue":o=>d(s).keyword[e.n]=o,placeholder:t.$t(e.n),class:"q-pr-none",autofocus:k.value==e.n,onFocus:o=>k.value=e.n,square:"",filled:""},{append:v(()=>[m(g,{icon:"swap_vert",color:"primary",class:"q-pa-none q-ma-none",onClick:o=>x(e.n),flat:"",square:""},null,8,["onClick"])]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder","autofocus","onFocus"])],4))),128)),d(l).canEdit(i.permissionKey)?(a(),r("th",L,[m(Q,{name:"edit",size:"xs",color:"grey"})])):S("",!0)])]),c("tbody",null,[(a(!0),r(y,null,f(B.value,e=>(a(),r("tr",{key:e.i},[c("td",O,b(e.i),1),(a(!0),r(y,null,f(i.columns,o=>(a(),r("td",{key:o.n,class:"text-left"},b(e[o.n]),1))),128)),d(l).canEdit(i.permissionKey)?(a(),r("td",U,[m(g,{icon:"edit",size:"sm",color:"warning",onClick:o=>d(s).newRow=JSON.parse(JSON.stringify(e)),round:"",flat:"",dense:""},null,8,["onClick"])])):S("",!0)]))),128))])]),_:1}))}};export{W as _};
